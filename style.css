:root{
  --color-background-primary: #0a0a0a;
  --color-widget-bg: #ffffff;
  --color-text-primary: #111;
  --color-text-secondary: #555;
  --color-accent-solar: #ff6b00;
  --color-accent-grid: #00aaff;
  --color-chart-fill: #dedede;

  --header-height: 72px;
  --card-radius: 14px;
  --gap: 0.3rem;
}

*{box-sizing:border-box}
html,body{height:100%; margin:0; font-family:'Inter',Roboto,sans-serif; scroll-behavior:smooth; background:var(--color-background-primary); color:#fff;}
main{padding-top: calc(var(--header-height)+16px);}

/* Header */
.site-header{position:fixed; top:0; left:0; right:0; height: var(--header-height); display:flex; align-items:center; padding:0 28px; background: rgba(10,10,10,0.95); box-shadow:0 2px 14px rgba(0,0,0,0.7); z-index:200;}
.logo-user{display:flex; align-items:center; gap:12px;}
.logo-img{height:40px; width:auto; transition: transform .25s;}
.logo-img:hover{transform:scale(1.07);}
.username{font-weight:600; color:#fff; font-size:16px;}
.main-nav{position:absolute; left:50%; transform:translateX(-50%); display:flex; gap:6px; background: rgba(255,255,255,0.06); padding:6px 10px; border-radius:10px; backdrop-filter:blur(6px);}
.main-nav button{background:transparent; border:none; color:#fff; padding:8px 14px; border-radius:8px; font-weight:600; cursor:pointer; transition: background .25s ease, transform .2s ease;}
.main-nav button.active, .main-nav button:hover{background: rgba(255,255,255,0.15); transform: translateY(-2px);}

/* Visual Area */
.visual-area{padding:28px; max-width:1400px; margin:auto;}
.visual-header{display:flex; gap:16px; margin-bottom:12px;}
.visual-header h1{margin:0; font-size:22px; font-weight:700;}
.site-id{color:#ccc; font-size:13px;}
.visual-stage{position:relative; background:#111; border-radius:var(--card-radius); padding:28px; min-height:320px; display:flex; align-items:center; justify-content:center; box-shadow:0 6px 22px rgba(0,0,0,0.6); transition:box-shadow .3s;}
.panel-3d{width:70%; height:220px; background:linear-gradient(135deg,#181818,#0d0d0d); border-radius:10px; display:flex; justify-content:center; align-items:center; color:#888; font-size:14px;}
.visual-controls{position:absolute; right:12px; top:50%; transform:translateY(-50%); display:flex; flex-direction:column; gap:8px;}
.visual-controls .ctrl{background: rgba(255,255,255,0.15); border:none; width:44px; height:44px; border-radius:8px; color:#fff; font-size:20px; cursor:pointer;}

/* Data Grid */
.data-grid-container{display:grid; grid-template-columns:repeat(4,1fr); gap:var(--gap); padding:2rem; max-width:1400px; margin:auto;}
@media(max-width:1024px){.data-grid-container{grid-template-columns:repeat(2,1fr);}}
@media(max-width:480px){.data-grid-container{grid-template-columns:1fr; padding:1rem;}}

/* Data Cards */
.data-card{background:#fff; color:#111; border-radius:var(--card-radius); padding:16px; box-shadow:0 8px 20px rgba(0,0,0,0.35); display:flex; flex-direction:column; justify-content:space-between; transition:transform .28s ease, box-shadow .28s ease, opacity .28s ease; cursor:pointer;}
.data-card:hover{transform:translateY(-6px); box-shadow:0 20px 45px rgba(0,0,0,0.5);}
.data-card.selected { transform: scale(0.95) translateY(5px); box-shadow: 0 2px 8px rgba(0,0,0,0.2); opacity: 0.8;}
.card-top{display:flex; justify-content:space-between; align-items:center;}
.card-top h3{font-size:14px; font-weight:700; margin:0;}
.metric{font-size:28px; font-weight:800; margin:8px 0;}
.breakdown{display:flex; justify-content:space-between; font-size:13px; color:#666;}
.mini-chart{height:40px; background:#ebebeb; border-radius:8px; color:#666; display:flex; align-items:center; justify-content:center;}
.progress-bar{background:#e0e0e0; height:12px; border-radius:6px; overflow:hidden; margin:8px 0;}
.progress{height:100%; background:var(--color-accent-solar);}
.progress-label{font-size:12px; color:#444;}

/* Overlay Popups */
.card-overlay{position:fixed; inset:0; background:rgba(0,0,0,0.55); backdrop-filter:blur(6px); z-index:300; display: none;}
.card-overlay.active{display: block;}
.popup-card{position: absolute; background:#fff; border-radius:14px; padding:18px; color:#111; opacity: 0; pointer-events: none; transition: transform 0.35s ease, opacity 0.35s ease, width 0.35s ease, height 0.35s ease, top 0.35s ease, left 0.35s ease;}
.popup-card.expanded{opacity:1; pointer-events: auto;}
.closePopup{position:absolute; top:14px; right:14px; font-size:20px; background:none; border:none; cursor:pointer;}
